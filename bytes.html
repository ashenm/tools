---
lang: en
title: Bytes
desc: A Binary Prefix Calculator
keywords: ashen, gunaratne, ashen m. gunaratne, binary prefixes, iec, iso, metric, si
---

{%- capture metadata -%}
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" />
  <meta name="description" content="{{ page.desc }}" />
  <meta name="keywords" content="{{ page.keywords }}" />
  <meta name="author" content="{{ site.author }}" />

  <title>{{ page.title }}</title>

  <style>

    * {
      box-sizing: border-box;
    }

    body {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
    }

    fieldset {
      border-radius: 5px;
      margin: 0.5rem 0;
    }

    fieldset > div {
      display: grid;
      font-family: monospace;
      grid-template-columns: 1fr 3ch;
      grid-column-gap: 0.25rem;
      margin: 0.25rem 0;
    }

    fieldset > div > input {
      text-align: right;
    }

    fieldset > div > input.invalid {
      outline: 1px auto #DB4437;
    }

    legend {
      color: #FFF;
      background: #888;
      border-radius: 5px;
      padding: 0 0.25rem;
      font-size: small;
      width: 100%;
    }

    @media (min-width: 768px) {
      :root { font-size: 1.5rem; }
    }

    @media (min-width: 1024px) {
      :root { font-size: 1.75rem; }
    }

  </style>
{%- endcapture -%}

{%- capture scripts -%}
  <script>

    var handler = function populateMagnitudes (e) {

      var value = +e.target.value;

      if (value !== value) {
        e.target.classList.add('invalid');
        return false;
      }

      if (e.target.classList.contains('iec')) {
        value *= Math.pow(1024, e.target.dataset.magnitude);
      } else if (e.target.classList.contains('metric')) {
        value *= Math.pow(1000, e.target.dataset.magnitude);
      }

      for (var input of window.inputs) {

        if (input.classList.contains('iec')) {
          input.value = value / Math.pow(1024, input.dataset.magnitude);
          input.classList.remove('invalid');
          continue;
        }

        if (input.classList.contains('metric')) {
          input.value = value / Math.pow(1000, input.dataset.magnitude);
          input.classList.remove('invalid');
          continue;
        }

      }

      window.bits.value = 8 * value;
      window.bytes.value = value;

      return true;

    };

    document.onreadystatechange = function onDOMContentLoaded () {

      if (document.readyState !== 'interactive') {
        return false;
      }

      document.querySelector('main')
        .addEventListener('input', handler, { passive: true });

      window.inputs = document.getElementsByTagName('input');
      window.bytes = document.getElementById('bytes');
      window.bits = document.getElementById('bits');

    };

  </script>
{%- endcapture -%}

{%- capture body -%}
  <header></header>
  <main>
    <form>
      <fieldset>
        <div>
          <input id="bits" type="number" /> b
        </div>
        <div>
          <input id="bytes" type="number" autofocus="autofocus" /> B
        </div>
      </fieldset>
      <fieldset>
        <legend>SI (Metric)</legend>
        <div>
          <input class="metric" type="number" data-magnitude="1" /> kB
        </div>
        <div>
          <input class="metric" type="number" data-magnitude="2" /> MB
        </div>
        <div>
          <input class="metric" type="number" data-magnitude="3" /> GB
        </div>
      </fieldset>
      <fieldset>
        <legend>IEC 80000</legend>
        <div>
          <input class="iec" type="number" data-magnitude="1" /> KiB
        </div>
        <div>
          <input class="iec" type="number" data-magnitude="2" /> MiB
        </div>
        <div>
          <input class="iec" type="number" data-magnitude="3" /> GiB
        </div>
      </fieldset>
    </form>
  </main>
  <footer></footer>
{%- endcapture -%}

{%- include base.html -%}

{%- comment -%} vim: set expandtab shiftwidth=2 syntax=liquid: {%- endcomment -%}
